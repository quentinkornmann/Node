<!DOCTYPE html>
<html>
	<head>
	
		<style>
			canvas[resize]
			{
				width : 1000px;
				height : 400px;
				border : 4px solid black;
			}
		</style>
		
		<!-- Load the Paper.js library -->
		<script type="text/javascript" src="index_files/paper.js">
		</script>
		<script type="text/javascript">
			var ws = new WebSocket('wss://localhost:8000');
			ws.onmessage = function(e){
				var element = document.getElementById("reponse");
				element.innerHTML = e.data;
			};
		</script>
		
		<!-- Define inlined PaperScript associate it with myCanvas -->
		<script type="text/paperscript" canvas="myCanvas">
			
			var vector = 300;
			var centre = new Point(Math.random() * 1000, Math.random() * 400);
			
			var circle = new Path.Circle(centre, 20);
			circle.fillColor = 'red';
			var tab = [circle];
			
			for(i = 0 ; i < 40 ; i++)
			{
				tab.push(circle.clone());
			}
		
			function onMouseMove(event)
			{
				ws.send('test');
				vector = event.point - circle.position;
				vector.length = 500;
				x = 1;
			}
			
			function onFrame(event)
			{
				circle.fillColor.hue += 0.3;
				circle.position += vector / 60;
				
				var copie = circle.clone();
				tab.push(copie);
				tab.splice(1,1)[0].remove();
			}
		</script>
	</head>

	<body>
		<canvas id="myCanvas" resize="true"></canvas>
		<div>
			<p id="reponse"> texte </p>
		</div>
	</body>
</html>